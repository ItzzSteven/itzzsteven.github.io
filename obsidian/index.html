<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Obsidian Launcher</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:"Segoe UI",sans-serif}
body{background:#1b1b1b;height:100vh;display:flex;justify-content:center;align-items:center}
.launcher{width:940px;height:560px;background:#2d2d2d;display:flex;border-radius:6px;overflow:hidden}
.sidebar{width:200px;background:#202020;padding-top:20px}
.sidebar h1{color:#6ddf6d;text-align:center;margin-bottom:25px}
.nav li{list-style:none;padding:12px 25px;color:#ccc;cursor:pointer}
.nav li.active{background:#2d2d2d;color:#6ddf6d}
.nav li:hover{background:#2a2a2a}
.main{flex:1;padding:20px;color:white;position:relative}
.page{display:none;height:100%}
.page.active{display:block}
.header{font-size:20px;margin-bottom:10px}
.play-bar{position:absolute;bottom:35px;left:20px;right:20px;display:flex;justify-content:space-between;align-items:center}
select{background:#1f1f1f;color:white;border:1px solid #333;padding:8px;width:300px}
.play-btn{background:#6ddf6d;color:#0f2f0f;font-size:22px;font-weight:bold;padding:14px 90px;border:none;border-radius:6px;cursor:pointer}
.play-btn:disabled{background:#555;cursor:not-allowed}
#statusText{margin-top:10px;color:#aaa;font-size:14px}
#progressContainer{margin-top:15px;display:none}
#progressBarWrap{background:#1f1f1f;height:18px;border-radius:4px}
#progressBar{height:100%;width:0%;background:#6ddf6d;border-radius:4px}
.installations li{background:#1f1f1f;padding:10px;margin-bottom:6px;display:flex;justify-content:space-between;align-items:center}
.switch{position:relative;width:42px;height:22px}
.switch input{display:none}
.slider{position:absolute;inset:0;background:#444;border-radius:22px;transition:.2s}
.slider:before{content:"";position:absolute;width:18px;height:18px;left:2px;top:2px;background:white;border-radius:50%;transition:.2s}
input:checked+.slider{background:#6ddf6d}
input:checked+.slider:before{transform:translateX(20px)}
#skinList li{background:#1f1f1f;padding:10px;margin-bottom:6px}
</style>
</head>
<body>

<div class="launcher">
<aside class="sidebar">
<h1>Obdisian</h1>
<ul class="nav">
<li class="active" onclick="showPage('play',this)">Play</li>
<li onclick="showPage('installations',this)">Installations</li>
<li onclick="showPage('skins',this)">Skins</li>
</ul>
</aside>

<main class="main">
<!-- PLAY -->
<div class="page active" id="play">
<div class="header">Play</div>
<div id="latestText" style="color:#aaa;margin-top:5px"></div>
<div id="statusText"></div>
<div class="play-bar">
<select id="versionSelect"></select>
<button class="play-btn" onclick="play()">PLAY</button>
</div>
<div id="progressContainer">
<div id="progressBarWrap">
<div id="progressBar"></div>
</div>
</div>
</div>

<!-- INSTALLATIONS -->
<div class="page installations" id="installations">
<div class="header">Installations</div>
<ul id="installationList"></ul>
</div>

<!-- SKINS -->
<div class="page" id="skins">
<div class="header">Skins</div>
<ul id="skinList"></ul>
</div>
</main>
</div>

<!-- VERSION JSON -->
<script id="versionData" type="application/json">
[
  { "name":"Latest Release","version":"1.12.2 (WASM)","enabled":true,"latest":true },
  { "name":"1.12.2","version":"1.12.2 (JS)","enabled":true,"latest":false },
  { "name":"1.8.8","version":"1.8.8 (WASM)","enabled":false,"latest":false }
]
</script>

<script>
/* NAVIGATION */
function showPage(id,el){
document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
document.getElementById(id).classList.add('active');
document.querySelectorAll('.nav li').forEach(l=>l.classList.remove('active'));
el.classList.add('active');
}

/* LOAD DATA */
let installations = JSON.parse(localStorage.getItem("installations")) 
|| JSON.parse(versionData.textContent);
function save(){localStorage.setItem("installations",JSON.stringify(installations));}

/* RENDER */
function render(){
installationList.innerHTML="";
versionSelect.innerHTML="";
latestText.textContent="";

installations.forEach(inst=>{
// Installations list
const li=document.createElement("li");
li.innerHTML=`<span>${inst.name} (${inst.version})</span>`;
const label=document.createElement("label");
label.className="switch";
const input=document.createElement("input");
input.type="checkbox";
input.checked=inst.enabled;
input.onchange=()=>{inst.enabled=input.checked;save();render();}
const slider=document.createElement("span");
slider.className="slider";
label.append(input,slider);
li.appendChild(label);
installationList.appendChild(li);

// Play selector
if(inst.enabled){
const opt=document.createElement("option");
opt.value=inst.version;
opt.textContent=`${inst.name} (${inst.version})`;
versionSelect.appendChild(opt);
}

// Latest text
if(inst.latest) latestText.textContent="Latest: "+inst.name;
});
}

/* PLAY */
function play(){
if(versionSelect.options.length===0){
statusText.textContent="No enabled installations available.";
return;
}
progressContainer.style.display="block";
progressBar.style.width="0%";
let progress=0;
const steps=["Preparing...","Downloading assets...","Installing...","Launching..."];
let s=0;
const i=setInterval(()=>{
progress+=Math.random()*15+5;
if(progress>100) progress=100;
progressBar.style.width=progress+"%";
statusText.textContent=steps[Math.min(s++,steps.length-1)];
if(progress>=100){
clearInterval(i);
setTimeout(()=>location.href="https://minecraft.net",800);
}
},500);
}

/* LOAD SKINS FROM FOLDER */
function loadSkins(){
fetch("skins.json")
.then(res=>res.json())
.then(files=>{
skinList.innerHTML="";
files.forEach(f=>{
const li=document.createElement("li");
li.textContent=f.split("/").pop(); // filename only
skinList.appendChild(li);
});
});
}

/* INIT */
render();
loadSkins();
</script>

</body>
</html>
